<!DOCTYPE html>
<html>
<head><title>MinuteMate</title></head>
<body>
  <h1>MinuteMate</h1>
  <div id="status">Status: ...</div>
  <button onclick="startRecording()">Start Meeting</button>
  <pre id="output"></pre>

  <script>
    async function pollStatus() {
      const res = await fetch('/status');
      const data = await res.json();
      document.getElementById("status").innerText = `Status: ${data.status}`;
      if (data.status === "idle") {
        const minutes = await fetch('/minutes/latest').then(r => r.json());
        document.getElementById("output").innerText = JSON.stringify(minutes, null, 2);
      }
    }

    async function startRecording() {
      await fetch('/start');
      pollStatus();
    }

    setInterval(pollStatus, 3000);
  </script>
</body>
</html>
